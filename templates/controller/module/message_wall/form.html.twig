<form id="message-send" class="form-inline">
    <input id="message-input" type="text" class="form-group smile-replaceable form-input" name="message"
           style="width: 65%">
    <button id="message-submit" type="submit"
            class="btn btn-new form-group">{{ (id ~ '_submit')|trans }}
    </button>
</form>
<script type="text/javascript">
    var f1tippSmileys = {
        'o/': 'ğŸ‘‹',
        '</3': 'ğŸ’”',
        '<3': 'ğŸ’—',
        '8-D': 'ğŸ˜',
        '8D': 'ğŸ˜',
        ':-D': 'ğŸ˜',
        '=-3': 'ğŸ˜',
        '=-D': 'ğŸ˜',
        '=3': 'ğŸ˜',
        '=D': 'ğŸ˜',
        'B^D': 'ğŸ˜',
        'X-D': 'ğŸ˜',
        'XD': 'ğŸ˜',
        'x-D': 'ğŸ˜',
        'xD': 'ğŸ˜',
        ':\')': 'ğŸ˜‚',
        ':\'-)': 'ğŸ˜‚',
        ':-))': 'ğŸ˜ƒ',
        '8)': 'ğŸ˜„',
        ':)': 'ğŸ˜„',
        ':-)': 'ğŸ˜„',
        ':3': 'ğŸ˜„',
        ':D': 'ğŸ˜„',
        ':]': 'ğŸ˜„',
        ':^)': 'ğŸ˜„',
        ':c)': 'ğŸ˜„',
        ':o)': 'ğŸ˜„',
        ':}': 'ğŸ˜„',
        ':ã£)': 'ğŸ˜„',
        '=)': 'ğŸ˜„',
        '=]': 'ğŸ˜„',
        '0:)': 'ğŸ˜‡',
        '0:-)': 'ğŸ˜‡',
        '0:-3': 'ğŸ˜‡',
        '0:3': 'ğŸ˜‡',
        '0;^)': 'ğŸ˜‡',
        'O:-)': 'ğŸ˜‡',
        '3:)': 'ğŸ˜ˆ',
        '3:-)': 'ğŸ˜ˆ',
        '}:)': 'ğŸ˜ˆ',
        '}:-)': 'ğŸ˜ˆ',
        '*)': 'ğŸ˜‰',
        '*-)': 'ğŸ˜‰',
        ':-,': 'ğŸ˜‰',
        ';)': 'ğŸ˜‰',
        ';-)': 'ğŸ˜‰',
        ';-]': 'ğŸ˜‰',
        ';D': 'ğŸ˜‰',
        ';]': 'ğŸ˜‰',
        ';^)': 'ğŸ˜‰',
        ':-|': 'ğŸ˜',
        ':|': 'ğŸ˜',
        ':(': 'ğŸ˜’',
        ':-(': 'ğŸ˜’',
        ':-<': 'ğŸ˜’',
        ':-[': 'ğŸ˜’',
        ':-c': 'ğŸ˜’',
        ':<': 'ğŸ˜’',
        ':[': 'ğŸ˜’',
        ':c': 'ğŸ˜’',
        ':ã£C': 'ğŸ˜’',
        '%)': 'ğŸ˜–',
        '%-)': 'ğŸ˜–',
        ':-P': 'ğŸ˜œ',
        ':-b': 'ğŸ˜œ',
        ':-p': 'ğŸ˜œ',
        ':-Ã': 'ğŸ˜œ',
        ':-Ã¾': 'ğŸ˜œ',
        ':P': 'ğŸ˜œ',
        ':b': 'ğŸ˜œ',
        ':p': 'ğŸ˜œ',
        ':Ã': 'ğŸ˜œ',
        ':Ã¾': 'ğŸ˜œ',
        ';(': 'ğŸ˜œ',
        '=p': 'ğŸ˜œ',
        'X-P': 'ğŸ˜œ',
        'XP': 'ğŸ˜œ',
        'd:': 'ğŸ˜œ',
        'x-p': 'ğŸ˜œ',
        'xp': 'ğŸ˜œ',
        ':-||': 'ğŸ˜ ',
        ':@': 'ğŸ˜ ',
        ':-.': 'ğŸ˜¡',
        ':-/': 'ğŸ˜¡',
        ':/': 'ğŸ˜¡',
        ':L': 'ğŸ˜¡',
        ':S': 'ğŸ˜¡',
        ':\\': 'ğŸ˜¡',
        '=/': 'ğŸ˜¡',
        '=L': 'ğŸ˜¡',
        '=\\': 'ğŸ˜¡',
        ':\'(': 'ğŸ˜¢',
        ':\'-(': 'ğŸ˜¢',
        '^5': 'ğŸ˜¤',
        '^<_<': 'ğŸ˜¤',
        'o/\\o': 'ğŸ˜¤',
        '|-O': 'ğŸ˜«',
        '|;-)': 'ğŸ˜«',
        ':###..': 'ğŸ˜°',
        ':-###..': 'ğŸ˜°',
        'D-\':': 'ğŸ˜±',
        'D8': 'ğŸ˜±',
        'D:': 'ğŸ˜±',
        'D:<': 'ğŸ˜±',
        'D;': 'ğŸ˜±',
        'D=': 'ğŸ˜±',
        'DX': 'ğŸ˜±',
        'v.v': 'ğŸ˜±',
        '8-0': 'ğŸ˜²',
        ':-O': 'ğŸ˜²',
        ':-o': 'ğŸ˜²',
        ':O': 'ğŸ˜²',
        ':o': 'ğŸ˜²',
        'O-O': 'ğŸ˜²',
        'O_O': 'ğŸ˜²',
        'O_o': 'ğŸ˜²',
        'o-o': 'ğŸ˜²',
        'o_O': 'ğŸ˜²',
        'o_o': 'ğŸ˜²',
        ':$': 'ğŸ˜³',
        '#-)': 'ğŸ˜µ',
        ':#': 'ğŸ˜¶',
        ':&': 'ğŸ˜¶',
        ':-#': 'ğŸ˜¶',
        ':-&': 'ğŸ˜¶',
        ':-X': 'ğŸ˜¶',
        ':X': 'ğŸ˜¶',
        ':-J': 'ğŸ˜¼',
        ':*': 'ğŸ˜½',
        ':^*': 'ğŸ˜½',
        'à² _à² ': 'ğŸ™…',
        '*\\0/*': 'ğŸ™†',
        '\\o/': 'ğŸ™†',
        ':>': 'ğŸ˜„',
        '>.<': 'ğŸ˜¡',
        '>:(': 'ğŸ˜ ',
        '>:)': 'ğŸ˜ˆ',
        '>:-)': 'ğŸ˜ˆ',
        '>:/': 'ğŸ˜¡',
        '>:O': 'ğŸ˜²',
        '>:P': 'ğŸ˜œ',
        '>:[': 'ğŸ˜’',
        '>:\\': 'ğŸ˜¡',
        '>;)': 'ğŸ˜ˆ',
        '>_>^': 'ğŸ˜¤'
    };
    $(document).ready(function () {
        $('#message-send').submit(function (e) {

            e.preventDefault();

            $.ajax({
                type: "POST",
                url: '/messages/save',
                dataType: "json",
                data: $(this).serialize(),
                beforeSend: function () {
                    $("#message-submit").html('<img src="{{ asset('build/images/15.gif') }}" height="20" width="60">');
                },
                complete: function () {
                    $('#messages-list').load('/messages/list');
                    $("#message-input").val('');
                    $("#message-submit").html('{{ (id ~ '_submit')|trans }}');
                }
            })
        });

        setInterval(function () {
            $('#messages-list').load('/messages/list');
        }, 15000);

        $('.smile-replaceable').keyup(function () {
            var words = $('.smile-replaceable').val().split(' ');
            var i;
            var replaced = false;
            for (i = 0; i < words.length; ++i) {
                if (f1tippSmileys[words[i]]) {
                    replaced = true;
                    words[i] = f1tippSmileys[words[i]];
                }
            }
            if (replaced) {
                $('.smile-replaceable').val(words.join(" "));
            }
        });
    });
</script>